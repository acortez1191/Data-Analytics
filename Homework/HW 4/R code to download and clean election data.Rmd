---
title: "Homework 4 Data Preparation"
author: "Ashwin Malshe"
date: "11/10/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

```{r}
ele_2020 <- read_csv("https://raw.githubusercontent.com/tonmcg/US_County_Level_Election_Results_08-20/master/2020_US_County_Level_Presidential_Results.csv")
ele_2016 <- read_csv("https://raw.githubusercontent.com/tonmcg/US_County_Level_Election_Results_08-20/master/2016_US_County_Level_Presidential_Results.csv")

```


```{r}
names(ele_2016)
```

```{r}
names(ele_2020)
```
```{r}
ele_2016 <- ele_2016 %>% 
  select(-X1, -per_point_diff, -county_name, -diff) %>%
  mutate(combined_fips = sprintf("%05d", combined_fips)) %>% 
  rename(votes_dem_16 = votes_dem,
         votes_gop_16 = votes_gop,
         total_votes_16 = total_votes,
         per_dem_16 = per_dem,
         per_gop_16 = per_gop)
```

```{r}
ele_2020 <- ele_2020 %>% 
  select(-diff) %>% 
    rename(votes_dem_20 = votes_dem,
         votes_gop_20 = votes_gop,
         total_votes_20 = total_votes,
         per_dem_20 = per_dem,
         per_gop_20 = per_gop,
         per_point_diff_20 = per_point_diff)
```


```{r}
total_election <- ele_2020 %>% left_join(ele_2016, by = c("county_fips" = "combined_fips"))
```

Variable description:

state_name - Name of the state
county_fips - County FIPS code. Not relevant for you.
county_name - Name of the county
votes_gop_20 - GOP votes in 2020 (Trump) in the county
votes_dem_20 - Dem votes in 2020 (Biden) in the county
total_votes_20 - Total votes cast in 2020 in the county
per_gop_20 - Percentage GOP votes in 2020 in the county
per_dem_20 - Percentage Dem votes in 2020 in the county (I recommend recreating this variable in Tableau)
per_point_diff_20 - Percentage vote difference in 2020 (Don't use this variable)
votes_dem_16 - GOP votes in 2016 (Trump) in the county
votes_gop_16 - Dem votes in 2016 (Clinton) in the county
total_votes_16 - Total votes cast in 2016 in the county
per_dem_16 - Percentage GOP votes in 2016 in the county
per_gop_16 - Percentage Dem votes in 2016 in the county
state_abbr - Two letter abbreviation of state name

This is where I saved the file on my computer.

```{r eval=FALSE}
total_election %>% write_csv("/Users/malshe/Dropbox/Work/Teaching/Visualization/Fall 2021/Homework/Homework 4/election_16_20.csv")
```

